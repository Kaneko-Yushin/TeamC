<!DOCTYPE html>
<html lang="{{ current_lang }}">
<head>
  <meta charset="UTF-8">
  <title>{{ _('üìù Ë®òÈå≤„ÇíËøΩÂä†') }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-4" style="max-width:820px;">
    <h3 class="mb-3">{{ _('üìù Ë®òÈå≤„ÇíËøΩÂä†') }}</h3>
    <form method="post" class="card p-4 shadow">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">{{ _('ÂêçÂâç') }}</label>
          <select name="user_id" class="form-select" required>
            {% for u in users %}
              <option value="{{ u[0] }}">{{ u[1] }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label">Meal</label>
          <div class="input-group">
            <select name="meal" class="form-select" id="mealSel">
              {% for v in MEAL_CHOICES %}<option>{{ v }}</option>{% endfor %}
            </select>
            <input name="meal_other" class="form-control" placeholder="„Åù„ÅÆ‰ªñÂÜÖÂÆπ" id="mealOther" style="display:none;">
          </div>
        </div>

        <div class="col-md-6">
          <label class="form-label">Medication</label>
          <div class="input-group">
            <select name="medication" class="form-select" id="medSel">
              {% for v in MEDICATION_CHOICES %}<option>{{ v }}</option>{% endfor %}
            </select>
            <input name="medication_other" class="form-control" placeholder="„Åù„ÅÆ‰ªñÂÜÖÂÆπ" id="medOther" style="display:none;">
          </div>
        </div>

        <div class="col-md-6">
          <label class="form-label">Toilet</label>
          <div class="input-group">
            <select name="toilet" class="form-select" id="toiSel">
              {% for v in TOILET_CHOICES %}<option>{{ v }}</option>{% endfor %}
            </select>
            <input name="toilet_other" class="form-control" placeholder="„Åù„ÅÆ‰ªñÂÜÖÂÆπ" id="toiOther" style="display:none;">
          </div>
        </div>

        <div class="col-md-6">
          <label class="form-label">Condition</label>
          <div class="input-group">
            <select name="condition" class="form-select" id="conSel">
              {% for v in CONDITION_CHOICES %}<option>{{ v }}</option>{% endfor %}
            </select>
            <input name="condition_other" class="form-control" placeholder="„Åù„ÅÆ‰ªñÂÜÖÂÆπ" id="conOther" style="display:none;">
          </div>
        </div>

        <div class="col-md-12">
          <label class="form-label">Memo</label>
          <textarea name="memo" class="form-control" rows="3"></textarea>
        </div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-success">{{ _('ÁôªÈå≤') if _('ÁôªÈå≤')!='ÁôªÈå≤' else 'Save' }}</button>
        <a href="{{ url_for('records') }}" class="btn btn-outline-secondary">{{ _('Êàª„Çã') if _('Êàª„Çã')!='Êàª„Çã' else 'Back' }}</a>
      </div>
    </form>
  </div>

  <script>
    const hookOther = (selId, otherId) => {
      const sel = document.getElementById(selId);
      const other = document.getElementById(otherId);
      const toggle = () => { other.style.display = (sel.value === "„Åù„ÅÆ‰ªñ") ? "" : "none"; }
      sel.addEventListener('change', toggle); toggle();
    };
    hookOther('mealSel','mealOther');
    hookOther('medSel','medOther');
    hookOther('toiSel','toiOther');
    hookOther('conSel','conOther');
  </script>
</body>
</html>



