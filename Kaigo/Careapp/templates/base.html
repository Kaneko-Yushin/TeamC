<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>{{ _("デジタル介護日誌") }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
      body.main-wrap{background:#f5faf7;min-height:100vh;font-family:"Segoe UI",system-ui,sans-serif}
      .app-bar{background:#256b3f;color:#fff;padding:.6rem 1.2rem;box-shadow:0 3px 10px rgba(0,0,0,.1)}
      .app-bar a{color:#fff;text-decoration:none}
      .brand{font-weight:700;font-size:1.25rem}
      .page-card{border:none;border-radius:18px;box-shadow:0 8px 20px rgba(0,0,0,.05);background:#fff}
      footer{text-align:center;color:#9a9a9a;padding:1.5rem 0;font-size:.9rem}
      .translate-wrap{display:flex;align-items:center;gap:10px}
    </style>
  </head>
  <body class="main-wrap">
    <!-- ヘッダー -->
    <nav class="navbar app-bar d-flex justify-content-between align-items-center">
      <a href="{{ url_for('home') }}" class="brand">{{ _("デジタル介護日誌") }}</a>
      <div class="translate-wrap">
        <div id="google_translate_element"></div>
        {% if session.get("staff_name") %}
          <span>{{ session.get("staff_name") }} ({{ session.get("staff_role") }})</span>
          <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm ms-2">{{ _("ログアウト") }}</a>
        {% else %}
          <a href="{{ url_for('staff_login') }}" class="btn btn-outline-light btn-sm">{{ _("ログイン") }}</a>
        {% endif %}
      </div>
    </nav>

    <!-- メイン（全ページをカードで包む） -->
    <main class="container py-4">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="mb-3">
            {% for msg in messages %}
              <div class="alert alert-info alert-dismissible fade show" role="alert">
                {{ msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <div class="page-card p-4">
        {% block content %}{% endblock %}
      </div>
    </main>

    <footer>&copy; 2025 デジタル介護日誌</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Google翻訳 -->
    <script>
      function googleTranslateElementInit(){
        new google.translate.TranslateElement(
          {pageLanguage:'ja',includedLanguages:'ja,en',layout:google.translate.TranslateElement.InlineLayout.SIMPLE},
          'google_translate_element'
        );
      }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  </body>
</html>
