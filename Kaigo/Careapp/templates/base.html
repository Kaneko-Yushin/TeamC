<!doctype html>
<html lang="{{ get_locale() }}">
  <head>
    <meta charset="utf-8">
    <title>{{ _("デジタル介護日誌") }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
      body.main-wrap {
        background: #f5faf7;
        min-height: 100vh;
        font-family: "Segoe UI", system-ui, sans-serif;
      }
      .app-bar {
        background: #256b3f;
        color: #fff;
        padding: 0.75rem 1.25rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .app-bar a {
        color: #fff;
        text-decoration: none;
      }
      .app-title {
        font-weight: 700;
        font-size: 1.2rem;
      }
      footer {
        text-align: center;
        color: #6c757d;
        font-size: 0.9rem;
        padding: 2rem 0;
      }
    </style>
  </head>

  <body class="main-wrap">
    <!-- ========== ヘッダーバー ========== -->
    <header class="app-bar">
      <div class="d-flex align-items-center gap-2">
        <a href="{{ url_for('home') }}" class="app-title">{{ _("デジタル介護日誌") }}</a>
      </div>

      <div class="d-flex align-items-center gap-3">
        {% if session.get('staff_name') %}
          <span>{{ session['staff_name'] }}{% if session.get('staff_role') %} ({{ session['staff_role'] }}){% endif %}</span>
          <a href="{{ url_for('logout') }}" class="btn btn-sm btn-outline-light">{{ _("ログアウト") }}</a>
        {% else %}
          <a href="{{ url_for('staff_login') }}" class="btn btn-sm btn-outline-light">{{ _("ログイン") }}</a>
        {% endif %}
      </div>
    </header>

    <!-- ========== メインコンテンツ ========== -->
    <main class="container py-4">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="mb-3">
            {% for msg in messages %}
              <div class="alert alert-info">{{ msg }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </main>

    <!-- ========== フッター ========== -->
    <footer>
      <div>© 2025 Digital Care Notes</div>
      <div id="google_translate_element" class="mt-2"></div>
    </footer>

    <!-- ========== 多言語翻訳ウィジェット（パターンC：フル対応） ========== -->
    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({
          pageLanguage: 'ja',
          includedLanguages: 'en,vi,zh-CN,id,ne,tl,es,ko',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
      }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- ========== Bootstrap JS ========== -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>

