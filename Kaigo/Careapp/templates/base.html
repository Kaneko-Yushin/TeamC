<!doctype html>
<html lang="{{ get_locale() }}">
  <head>
    <meta charset="utf-8">
    <title>{{ _("デジタル介護日誌") }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
      body.main-wrap { background:#f5faf7; min-height:100vh; font-family:"Segoe UI", system-ui, sans-serif; }
      .app-bar { background:#256b3f; color:#fff; }
      .app-bar a { color:#fff; text-decoration:none; }
      .menu-card { background:#fff; border:none; border-radius:18px; box-shadow:0 10px 26px rgba(0,0,0,.08);
                   padding:28px 20px; height:100%; text-align:center; transition:transform .08s ease, box-shadow .2s ease; }
      .menu-card:hover { transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,.1); }
      .menu-emoji { font-size:56px; line-height:1; margin-bottom:12px; }
      .menu-title { font-weight:800; font-size:22px; color:#0f5132; margin-bottom:0; }
      .disabled { pointer-events:none; opacity:.5; }
      #google_translate_element { line-height:1; }
      .goog-te-combo { font-size:12px; }
    </style>
    {% block head_extra %}{% endblock %}
  </head>
  <body class="main-wrap">
    <!-- ヘッダー -->
    <div class="app-bar py-2">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="fw-bold"><a href="{{ url_for('home') }}">{{ _("デジタル介護日誌") }}</a></div>
        <div class="d-flex align-items-center gap-3 header-tools">
          <!-- Google ページ翻訳 -->
          <div id="google_translate_element"></div>

          {% if session.get('staff_name') %}
            <span class="small">
              {{ session.get('staff_name') }}{% if session.get('staff_role') == 'admin' %} (admin){% endif %}
            </span>
            <a class="btn btn-sm btn-outline-light" href="{{ url_for('logout') }}">{{ _("ログアウト") }}</a>
          {% else %}
            <a class="btn btn-sm btn-outline-light" href="{{ url_for('staff_login') }}">{{ _("ログイン") }}</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- フラッシュ & 本文 -->
    <div class="container py-4">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="alert alert-info mb-3">
            {% for m in messages %}{{ m }}<br>{% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block body %}{% endblock %}
    </div>

    <!-- Google ページ翻訳スクリプト -->
    <script>
      function googleTranslateElementInit() {
        if (window.google && window.google.translate) {
          new google.translate.TranslateElement(
            {pageLanguage: 'ja', includedLanguages: 'en,ja'},
            'google_translate_element'
          );
        }
      }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    {% block scripts %}{% endblock %}
  </body>
</html>
