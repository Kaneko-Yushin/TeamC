<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>{{ _("デジタル介護日誌") }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <style>
      body.main-wrap {
        background: #f5faf7;
        min-height: 100vh;
        font-family: "Segoe UI", system-ui, sans-serif;
      }
      .app-bar {
        background: #256b3f;
        color: #fff;
      }
      .app-bar a {
        color: #fff;
        text-decoration: none;
      }
      .app-bar .brand {
        font-weight: bold;
        font-size: 1.25rem;
      }
      footer {
        text-align: center;
        color: #999;
        padding: 1.5rem 0;
        font-size: 0.9rem;
      }
    </style>
  </head>

  <body class="main-wrap">
    <!-- ナビゲーションバー -->
    <nav class="navbar app-bar px-3 d-flex justify-content-between align-items-center">
      <a href="{{ url_for('home') }}" class="brand">{{ _("デジタル介護日誌") }}</a>

      <div class="d-flex align-items-center gap-3">
        <div id="google_translate_element"></div>

        {% if session.get("staff_name") %}
          <span>{{ session.get("staff_name") }} ({{ session.get("staff_role") }})</span>
          <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm">{{ _("ログアウト") }}</a>
        {% else %}
          <a href="{{ url_for('staff_login') }}" class="btn btn-outline-light btn-sm">{{ _("ログイン") }}</a>
        {% endif %}
      </div>
    </nav>

    <!-- メインコンテンツ -->
    <main class="container-fluid py-4">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="container">
            {% for msg in messages %}
              <div class="alert alert-info alert-dismissible fade show" role="alert">
                {{ msg }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      {% block content %}
      {% endblock %}
    </main>

    <footer>
      &copy; 2025 デジタル介護日誌
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Google翻訳ウィジェット -->
    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement(
          { pageLanguage: 'ja', includedLanguages: 'en,ja', layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
          'google_translate_element'
        );
      }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  </body>
</html>
