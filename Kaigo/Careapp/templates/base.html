<!doctype html>
<html lang="{{ get_locale() or 'ja' }}">
  <head>
    <meta charset="utf-8">
    <title>ãƒ‡ã‚¸ã‚¿ãƒ«ä»‹è­·æ—¥èªŒ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      body.main-wrap { background:#f5faf7; min-height:100vh; font-family:"Segoe UI",system-ui,sans-serif; }
      .app-bar { background:#256b3f; color:#fff; }
      .app-bar a { color:#fff; text-decoration:none; }
      .lang-pill { background:#1e5833; border:none; border-radius:9999px; padding:.3rem .8rem; color:#fff; font-size:.85rem; }
      .lang-pill.outline { background:transparent; border:1px solid #e6f2ec; color:#e6f2ec; }
      .content-wrap { max-width:1200px; margin:0 auto; padding:20px; }
      .goog-te-banner-frame.skiptranslate, #goog-gt-tt { display:none !important; }
      body { top:0 !important; }
    </style>
  </head>

  <body class="main-wrap">
    <nav class="navbar navbar-expand app-bar">
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="{{ url_for('home') }}">ğŸ©º ãƒ‡ã‚¸ã‚¿ãƒ«ä»‹è­·æ—¥èªŒ</a>
        <div class="ms-auto d-flex align-items-center gap-2">
          <div id="google_translate_element" class="d-none d-md-block"></div>
          <div class="translate-wrap d-flex gap-1">
            <button class="lang-pill outline" onclick="return gtSetLang('ja')">æ—¥æœ¬èª</button>
            <button class="lang-pill outline" onclick="return gtSetLang('en')">English</button>
            <button class="lang-pill outline" onclick="return gtSetLang('ko')">í•œêµ­ì–´</button>
            <button class="lang-pill outline" onclick="return gtSetLang('zh-CN')">ä¸­æ–‡</button>
            <button class="lang-pill outline" onclick="return gtSetLang('vi')">Tiáº¿ng Viá»‡t</button>
          </div>

          {% if session.get('staff_name') %}
            <span class="lang-pill">{{ session.get('staff_name') }}</span>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('logout') }}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
          {% elif session.get('family_name') %}
            <span class="lang-pill">{{ session.get('family_name') }}</span>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('family_logout') }}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
          {% else %}
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('staff_login') }}">ã‚¹ã‚¿ãƒƒãƒ•</a>
            <a class="btn btn-outline-light btn-sm" href="{{ url_for('family_login') }}">å®¶æ—</a>
          {% endif %}
        </div>
      </div>
    </nav>

    <main class="content-wrap">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="alert alert-success shadow-sm" role="alert">
            {% for m in messages %}<div>{{ m }}</div>{% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>

    <footer class="content-wrap pb-5 text-center text-muted">
      <hr>
      <small>Â© 2025 CareApp</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const GT_INCLUDED = 'ja,en,ko,zh-CN,vi';
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage:'ja',includedLanguages:GT_INCLUDED,autoDisplay:false}, 'google_translate_element');
      }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script>
      function setCookie(name,value,days){
        const d=new Date();d.setTime(d.getTime()+(days*24*60*60*1000));
        const expires="expires="+d.toUTCString();
        document.cookie=name+"="+value+";"+expires+";path=/";
      }
      function gtSetLang(lang){
        setCookie('googtrans','/ja/'+lang,30);
        location.reload();
        return false;
      }
    </script>
  </body>
</html>
