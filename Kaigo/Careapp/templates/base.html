
<!doctype html>
<html lang="{{ get_locale() }}">
  <head>
    <meta charset="utf-8">
    <title>{{ _("ãƒ‡ã‚¸ã‚¿ãƒ«ä»‹è­·æ—¥èªŒ") }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <style>
      body.main-wrap {
        background:#f5faf7;
        min-height:100vh;
        font-family:"Segoe UI", system-ui, sans-serif;
      }
      .app-bar {
        background:#256b3f;
        color:#fff;
        padding:.75rem 1.25rem;
        display:flex;
        align-items:center;
        justify-content:space-between;
        flex-wrap:wrap;
      }
      .app-bar a { color:#fff; text-decoration:none; }
      .app-title { font-weight:700; font-size:1.2rem; }
      footer {
        text-align:center;
        color:#6c757d;
        font-size:.9rem;
        padding:2rem 0;
      }
      /* ç¿»è¨³ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆè¦‹ãŸç›®èª¿æ•´ */
      #google_translate_element .goog-te-gadget-simple {
        background:#ffffff;
        border-radius:10px;
        padding:2px 6px;
        border:none;
      }
      #google_translate_element img.goog-te-gadget-icon { display:none; }
      #google_translate_element .goog-te-menu-value { color:#1f2937; }
      .gt-wrap { display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; }
    </style>
  </head>

  <body class="main-wrap">
    <!-- ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== -->
    <header class="app-bar">
      <a href="{{ url_for('home') }}" class="app-title">{{ _("ãƒ‡ã‚¸ã‚¿ãƒ«ä»‹è­·æ—¥èªŒ") }}</a>

      <div class="gt-wrap">
        <!-- ğŸŒ Googleç¿»è¨³ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ -->
        <div id="google_translate_element"></div>
        <!-- ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªã«æˆ»ã™ãƒœã‚¿ãƒ³ -->
        <button class="btn btn-sm btn-light" onclick="restoreJapanese()">æ—¥æœ¬èªã«æˆ»ã™</button>

        {% if session.get('staff_name') %}
          <span class="ms-2">
            {{ session['staff_name'] }}{% if session.get('staff_role') %} ({{ session['staff_role'] }}){% endif %}
          </span>
          <a href="{{ url_for('logout') }}" class="btn btn-sm btn-outline-light ms-2">{{ _("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ") }}</a>
        {% else %}
          <a href="{{ url_for('staff_login') }}" class="btn btn-sm btn-outline-light">{{ _("ãƒ­ã‚°ã‚¤ãƒ³") }}</a>
        {% endif %}
      </div>
    </header>

    <!-- ===== ãƒ¡ã‚¤ãƒ³ ===== -->
    <main class="container py-4">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="mb-3">
            {% for msg in messages %}
              <div class="alert alert-info">{{ msg }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>

    <!-- ===== ãƒ•ãƒƒã‚¿ãƒ¼ ===== -->
    <footer>Â© 2025 Digital Care Notes</footer>

    <!-- ===== Googleç¿»è¨³ï¼š8ã‹å›½èªå¯¾å¿œ + æ—¥æœ¬èªå¾©å¸°ä¿®æ­£ç‰ˆ ===== -->
    <script>
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({
          pageLanguage: 'ja',
          includedLanguages: 'en,vi,zh-CN,id,ne,tl,es,ko',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
      }

      // â˜… æ—¥æœ¬èªã«æˆ»ã™å‡¦ç†ï¼ˆç¢ºå®Ÿã«æˆ»ã‚‹ç‰ˆï¼‰
      function restoreJapanese() {
        try {
          var host = location.hostname;
          var parts = host.split('.');
          function clearSet(domain) {
            document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=' + domain;
            document.cookie = 'googtrans=/auto/ja; path=/; domain=' + domain;
          }
          // ã™ã¹ã¦ã®ãƒ‰ãƒ¡ã‚¤ãƒ³éšå±¤ã§cookieå‰Šé™¤ï¼†jaå›ºå®š
          for (var i = 0; i < parts.length - 1; i++) {
            clearSet('.' + parts.slice(i).join('.'));
          }
          document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';
          document.cookie = 'googtrans=/auto/ja; path=/';

          // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‰Šé™¤
          var url = new URL(location.href);
          url.searchParams.delete('hl');
          url.searchParams.delete('sl');
          url.searchParams.delete('tl');
          if (url.hash) url.hash = '';

          // å¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆç¿»è¨³è§£é™¤ï¼‰
          location.replace(url.toString());
        } catch (e) {
          location.reload(true);
        }
      }
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- ===== Bootstrap JS ===== -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
